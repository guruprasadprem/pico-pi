import network
import socket
import time

ssid = 'Goloka'
password = 'Krishna@108'

# Connect to Wi-Fi
wlan = network.WLAN(network.STA_IF)
wlan.active(True)
wlan.connect(ssid, password)
while not wlan.isconnected():
    time.sleep(1)
print("Connected, IP:", wlan.ifconfig()[0])

# Simple HTML with time
def make_html():
    current_time = time.localtime()
    formatted = "{:02}:{:02}:{:02}".format(current_time[3], current_time[4], current_time[5])
    return f"""<!DOCTYPE html>
<html><head><title>Pico W Clock</title></head>
<body>
    <h1>Current Time</h1>
    <p>{formatted}</p>
</body></html>"""

# Start server
addr = socket.getaddrinfo("0.0.0.0", 80)[0][-1]
s = socket.socket()
s.bind(addr)
s.listen(1)
print("Listening on http://" + wlan.ifconfig()[0])

while True:
    cl, addr = s.accept()
    print("Client from", addr)
    cl.recv(1024)
    response = make_html()
    cl.send("HTTP/1.0 200 OK\r\nContent-type: text/html\r\n\r\n")
    cl.send(response)
    cl.close()

